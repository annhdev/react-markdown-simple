import{E as e,T as t,a as n,t as r}from"./iframe-DPeSpypc.js";var i=n(),a=r(),o=({isOpen:e,title:t,fields:n,onClose:r,onConfirm:o})=>{let[s,c]=(0,i.useState)({}),l=(0,i.useCallback)(e=>{c(e)},[]);(0,i.useEffect)(()=>{e&&l({})},[e,n,l]);let u=(e,t)=>{c(n=>({...n,[e]:t}))};return e?(0,a.jsx)(`div`,{className:`editor-dialog-container fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200`,children:(0,a.jsxs)(`div`,{className:`editor-dialog bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden`,children:[(0,a.jsxs)(`div`,{className:`dialog-header bg-gray-50 px-6 py-4 border-b border-gray-100 flex justify-between items-center`,children:[(0,a.jsx)(`h3`,{className:`title font-semibold text-gray-800`,children:t}),(0,a.jsx)(`button`,{onClick:r,className:`close-btn text-gray-400 hover:text-gray-600`,children:`âœ•`})]}),(0,a.jsx)(`div`,{className:`dialog-body p-6 space-y-4`,children:n.map(e=>(0,a.jsxs)(`div`,{className:`dialog-field box-border`,children:[(0,a.jsx)(`span`,{className:`label block text-xs font-semibold text-gray-500 uppercase mb-1`,children:e.label}),e.type===`select`?(0,a.jsx)(`select`,{className:`w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none bg-white`,value:s[e.key]||``,onChange:t=>u(e.key,t.target.value),children:e.options?.map(e=>(0,a.jsx)(`option`,{value:e.value,children:e.label},e.value))}):(0,a.jsx)(`input`,{type:`text`,name:e.key,className:`w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none`,value:s[e.key]||``,onChange:t=>u(e.key,t.target.value),placeholder:e.placeholder,autoFocus:n[0].key===e.key})]},e.key))}),(0,a.jsxs)(`div`,{className:`dialog-footer px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-end gap-2`,children:[(0,a.jsx)(`button`,{onClick:r,className:`close-btn px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg`,children:`Cancel`}),(0,a.jsx)(`button`,{onClick:()=>o(s),className:`submit-btn px-4 py-2 text-sm text-white bg-blue-600 hover:bg-blue-700 rounded-lg font-medium shadow-sm`,children:`Insert`})]})]})}):null},s=o;o.__docgenInfo={description:``,methods:[],displayName:`InsertDialog`,props:{isOpen:{required:!0,tsType:{name:`boolean`},description:``},title:{required:!0,tsType:{name:`string`},description:``},fields:{required:!0,tsType:{name:`Array`,elements:[{name:`DialogField`}],raw:`DialogField[]`},description:``},onClose:{required:!0,tsType:{name:`signature`,type:`function`,raw:`() => void`,signature:{arguments:[],return:{name:`void`}}},description:``},onConfirm:{required:!0,tsType:{name:`signature`,type:`function`,raw:`(data: Record<string, string>) => void`,signature:{arguments:[{type:{name:`Record`,elements:[{name:`string`},{name:`string`}],raw:`Record<string, string>`},name:`data`}],return:{name:`void`}}},description:``}}};var c=({icon:e,onClick:t,tooltip:n})=>(0,a.jsx)(`button`,{type:`button`,onClick:t,className:`tool-button appearance-none p-1.5 text-gray-600 dark:text-gray-300 rounded focus:border-none focus:shadow-none focus:ring-0 focus:outline-1 focus:outline-blue-400 hover:bg-gray-200 hover:text-black`,title:n,"aria-label":n,children:e}),l=c;c.__docgenInfo={description:``,methods:[],displayName:`ToolButton`,props:{icon:{required:!0,tsType:{name:`ReactReactNode`,raw:`React.ReactNode`},description:``},onClick:{required:!0,tsType:{name:`signature`,type:`function`,raw:`() => void`,signature:{arguments:[],return:{name:`void`}}},description:``},tooltip:{required:!0,tsType:{name:`string`},description:``}}};var u={Bold:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`path`,{d:`M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z`}),(0,a.jsx)(`path`,{d:`M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z`})]}),Italic:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`line`,{x1:`19`,y1:`4`,x2:`10`,y2:`4`}),(0,a.jsx)(`line`,{x1:`14`,y1:`20`,x2:`5`,y2:`20`}),(0,a.jsx)(`line`,{x1:`15`,y1:`4`,x2:`9`,y2:`20`})]}),Strike:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`path`,{d:`M5 12h14`}),(0,a.jsx)(`path`,{d:`M4 6h16`,opacity:`0.5`}),(0,a.jsx)(`path`,{d:`M4 18h16`,opacity:`0.5`})]}),Heading:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`path`,{d:`M6 12h12`}),(0,a.jsx)(`path`,{d:`M6 20V4`}),(0,a.jsx)(`path`,{d:`M18 20V4`})]}),Quote:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`path`,{d:`M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z`}),(0,a.jsx)(`path`,{d:`M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z`})]}),List:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`line`,{x1:`8`,y1:`6`,x2:`21`,y2:`6`}),(0,a.jsx)(`line`,{x1:`8`,y1:`12`,x2:`21`,y2:`12`}),(0,a.jsx)(`line`,{x1:`8`,y1:`18`,x2:`21`,y2:`18`}),(0,a.jsx)(`line`,{x1:`3`,y1:`6`,x2:`3.01`,y2:`6`}),(0,a.jsx)(`line`,{x1:`3`,y1:`12`,x2:`3.01`,y2:`12`}),(0,a.jsx)(`line`,{x1:`3`,y1:`18`,x2:`3.01`,y2:`18`})]}),ListOrdered:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`line`,{x1:`10`,y1:`6`,x2:`21`,y2:`6`}),(0,a.jsx)(`line`,{x1:`10`,y1:`12`,x2:`21`,y2:`12`}),(0,a.jsx)(`line`,{x1:`10`,y1:`18`,x2:`21`,y2:`18`}),(0,a.jsx)(`path`,{d:`M4 6h1v4`}),(0,a.jsx)(`path`,{d:`M4 10h2`}),(0,a.jsx)(`path`,{d:`M6 18H4c0-1 2-2 2-3s-1-1.5-2-1`})]}),Check:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`polyline`,{points:`9 11 12 14 22 4`}),(0,a.jsx)(`path`,{d:`M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11`})]}),Table:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`2`}),(0,a.jsx)(`path`,{d:`M3 9h18`}),(0,a.jsx)(`path`,{d:`M12 21V9`})]}),Image:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`2`,ry:`2`}),(0,a.jsx)(`circle`,{cx:`8.5`,cy:`8.5`,r:`1.5`}),(0,a.jsx)(`polyline`,{points:`21 15 16 10 5 21`})]}),Link:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`path`,{d:`M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71`}),(0,a.jsx)(`path`,{d:`M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71`})]}),Code:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`polyline`,{points:`16 18 22 12 16 6`}),(0,a.jsx)(`polyline`,{points:`8 6 2 12 8 18`})]}),Eye:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`}),(0,a.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`})]}),EyeOff:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-5 h-5`,children:[(0,a.jsx)(`path`,{d:`M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24`}),(0,a.jsx)(`line`,{x1:`1`,y1:`1`,x2:`23`,y2:`23`})]}),Copy:()=>(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-4 h-4`,children:[(0,a.jsx)(`rect`,{x:`9`,y:`9`,width:`13`,height:`13`,rx:`2`,ry:`2`}),(0,a.jsx)(`path`,{d:`M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1`})]}),CheckSimple:()=>(0,a.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-4 h-4 text-green-500`,children:(0,a.jsx)(`polyline`,{points:`20 6 9 17 4 12`})})},d={general:`const let var function class return if else for while do switch case break continue new this super extends implements interface type import export from package public private protected static void int float double string boolean namespace using namespace try catch finally throw async await def struct impl enum fn pub let mut mod use crate match echo print println`,python:`def class if else elif for while try except finally raise import from as with pass return print lambda global nonlocal True False None and or not is in self yield`,php:`function class public private protected static return if else elseif for while foreach switch case break continue new this echo print include require use namespace try catch finally throw`,sql:`SELECT FROM WHERE INSERT INTO UPDATE DELETE CREATE DROP ALTER TABLE INDEX VIEW JOIN INNER LEFT RIGHT OUTER ON GROUP BY ORDER BY LIMIT OFFSET AND OR NOT IN IS NULL LIKE AS UNION VALUES PRIMARY KEY FOREIGN KEY DEFAULT`,css:`color background margin padding border font display position top left right bottom width height flex grid align justify overflow z-index transition transform animation @media @include @mixin @import`},f=e=>(e=e.toLowerCase(),[`js`,`javascript`,`ts`,`typescript`,`java`,`c`,`cpp`,`c++`,`c#`,`csharp`,`go`,`golang`,`kotlin`,`swift`,`rust`].includes(e)?d.general:[`py`,`python`,`rb`,`ruby`].includes(e)?d.python:[`php`].includes(e)?d.php:[`sql`].includes(e)?d.sql:[`css`,`scss`].includes(e)?d.css:``),p=class{constructor(){this.tokens=[],this.stash=e=>{let t=this.tokens.length;return this.tokens.push(e),`__TOKEN_${t}__`},this.restore=e=>e.replace(/__TOKEN_(\d+)__/g,(e,t)=>this.tokens[parseInt(t)]||e)}};const m=(e,t)=>{let n=new p;t=t.toLowerCase();let r=e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`);if([`html`,`xml`,`svg`,`vue`,`jsx`,`tsx`].includes(t))return r=r.replace(/(&lt;!--[\s\S]*?--&gt;)/g,e=>n.stash(`<span class="text-gray-400 italic">${e}</span>`)),r=r.replace(/(&lt;\/?[a-z0-9:-]+)(.*?)(&gt;)/gi,(e,t,n,r)=>`<span class="text-blue-600 font-bold">${t}</span>`+n.replace(/([a-z0-9:-]+)(\s*=\s*)(["'])(?:\\.|[^\\])*?\3/gi,(e,t,n,r)=>{let i=e.substring(t.length+n.length),a=`<span class="text-purple-600">${t}</span>`,o=`<span class="text-green-600">${i}</span>`;return a+n+o})+`<span class="text-blue-600 font-bold">${r}</span>`),n.restore(r);r=r.replace(/(["'`])(?:\\.|[^\\])*?\1/g,e=>n.stash(`<span class="text-green-600">${e}</span>`)),[`py`,`python`,`rb`,`ruby`,`sh`,`yaml`].includes(t)?r=r.replace(/(#.*$)/gm,e=>n.stash(`<span class="text-gray-400 italic">${e}</span>`)):t===`sql`?r=r.replace(/(--.*$)/gm,e=>n.stash(`<span class="text-gray-400 italic">${e}</span>`)):(r=r.replace(/(\/\/.*$)/gm,e=>n.stash(`<span class="text-gray-400 italic">${e}</span>`)),r=r.replace(/(\/\*[\s\S]*?\*\/)/g,e=>n.stash(`<span class="text-gray-400 italic">${e}</span>`)));let i=f(t);if(i){let e=RegExp(`\\b(${i.split(` `).join(`|`)})\\b`,`g`);r=r.replace(e,`<span class="text-purple-600 font-bold">$1</span>`)}return r=r.replace(/(?!(<\/?.*?>))(\s+?)(\d+)/g,`<span class="text-orange-600">$2$3</span>`),(t===`css`||t===`scss`)&&(r=r.replace(/([#.][a-zA-Z0-9_-]+)/g,`<span class="text-blue-600 font-bold">$1</span>`)),r=r.replace(/&amp;/g,`&`).replace(/&lt;/g,`<`).replace(/&gt;/g,`>`),n.restore(r)},h={name:`code`,codeBlocks:[],transform:e=>(e=e.replace(/```(\w*)([\s\S]*?)```/g,(e,t,n)=>{let r=t||`text`,i=`
              <div class="codeblock-container my-4 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-500 bg-gray-50 dark:bg-slate-800 dark:text-white shadow-sm">
                <div class="codeblock-header flex items-center justify-between px-4 py-1.5 bg-gray-100 dark:bg-slate-700 border-b border-gray-200 dark:border-gray-500">
                   <span class="code-language text-xs font-semibold text-gray-500 uppercase">${r}</span>
                   <span class="buttons flex gap-1.5">
                      <span class="button w-2.5 h-2.5 rounded-full bg-red-400"></span>
                      <span class="button w-2.5 h-2.5 rounded-full bg-yellow-400"></span>
                      <span class="button w-2.5 h-2.5 rounded-full bg-green-400"></span>
                   </span>
                </div>
                <div class="codeblock-body relative flex">
                    <pre class="p-4 overflow-x-auto text-sm font-mono leading-relaxed text-gray-800 dark:text-gray-400"><code>${m(n.trim(),r)}</code></pre>
                    <div class="tools absolute top-1 right-1 flex items-center gap-2">
                      <button class="tool-button js-copy-btn flex items-center gap-1 px-2 py-1 rounded text-xs bg-gray-100 text-gray-500 hover:text-gray-800 transition-colors" title="Copy to clipboard">
                         <span class="icon-wrap">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                         </span>
                         <span class="label">Copy</span>
                      </button>
                   </div>
                </div>
              </div>
            `;return h.codeBlocks.push(i),`__CODEBLOCK_${h.codeBlocks.length-1}__`}),e),restore:e=>e.replace(/__CODEBLOCK_(\d+)__/g,(e,t)=>h.codeBlocks[parseInt(t)]),trigger:{afterRender:()=>{document.querySelectorAll(`.js-copy-btn`).forEach(e=>{e.addEventListener(`click`,()=>{let t=e.closest(`div.relative`)?.querySelector(`pre code`);if(t){let n=t.textContent||``;navigator.clipboard.writeText(n).then(()=>{let t=e.querySelector(`.label`);t&&(t.textContent=`Copied!`,setTimeout(()=>{t.textContent=`Copy`},2e3))})}})})}}},g={name:`youtube-embed`,icon:(0,a.jsxs)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,width:`16`,height:`16`,children:[(0,a.jsx)(`path`,{d:`M22.54 6.42a2.78 2.78 0 0 0-1.95-2c-1.72-.46-8.63-.46-8.63-.46s-6.91 0-8.63.46a2.78 2.78 0 0 0-1.95 2C2 8.21 2 12 2 12s0 3.79.33 5.58a2.78 2.78 0 0 0 1.95 2c1.72.46 8.63.46 8.63.46s6.91 0 8.63-.46a2.78 2.78 0 0 0 1.95-2c.33-1.79.33-5.58.33-5.58s0-3.79-.33-5.58z`}),(0,a.jsx)(`polygon`,{points:`9.75 15.02 15.5 12 9.75 8.98 9.75 15.02`})]}),tooltip:`Embed YouTube Video`,toolbarOrder:1,showInToolbar:!0,transform:e=>e.replace(/!yt\[(.*?)]\((.*?)\)/g,(e,t,n)=>`<iframe width="560" height="315" src="https://www.youtube.com/embed/${n.split(`v=`)[1]}" title="${t}" frameborder="0" allowfullscreen></iframe>`),onToolbarClick:e=>{e.openDialog({title:`Embed YouTube Video`,fields:[{key:`title`,label:`Video Title`,type:`text`,placeholder:`Enter video title`},{key:`url`,label:`YouTube URL`,type:`text`,placeholder:`https://www.youtube.com/watch?v=VIDEO_ID`}],onConfirm:t=>{let n=`!yt[${t.title}](${t.url})`;e.insertText(n)}})}},_=(e,t=[])=>{let n=e||``;n=n.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`),t.forEach(e=>{n=e.transform(n)});let r=n.split(`
`),i=[],a=[],o=0;for(r.forEach(e=>{let t=e.match(/^((?:&gt;|>)+)\s?(.*)/),n=0,r=e;for(t?(n=t[1].replace(/&gt;/g,`>`).length,r=t[2]):n=0;o<n;)i.push(`<blockquote class="blockquote border-gray-300 pl-4 py-1 my-2 italic text-gray-600 dark:text-gray-300 bg-gray-50 dark:bg-gray-500 ml-${o*2}" style="margin-left: calc(${o} * 0.25rem)">`),o++;for(;o>n;)i.push(`</blockquote>`),o--;let s=r.match(/^(\s*)(\d+.|-\s\[[x ]]|[-*])\s+(.*)/);if(s){let e=s[1].length,t=Math.floor(e/2),n=s[2],r=s[3],o=`ul`,c=!1,l=!1;n.match(/^\d+\./)?o=`ol`:n.includes(`[`)&&(c=!0,l=n.includes(`x`));let u=a.length>0?a[a.length-1].indent:-1;if(t>u){let e=c?`<ul class="task-list pl-5 list-none">`:o===`ol`?`<ol class="list-decimal pl-5">`:`<ul class="list-disc pl-5">`;i.push(e),a.push({type:o,indent:t})}else if(t<u)for(;a.length>0&&a[a.length-1].indent>t;){let e=a.pop();i.push(e?.type===`ol`?`</ol>`:`</ul>`)}c?i.push(`<li class="flex flex-row items-center gap-2 m-0">
                                        <div data-checked=${l?`true`:`false`} class="checkbox group flex justify-center items-center relative">
                                            <input type="checkbox" ${l?`checked`:``} disabled class="p-0 m-0 appearance-none size-5 rounded border border-gray-300 checked:bg-blue-400 checked:border-blue-500 disabled:border-gray-300 disabled:bg-gray-50 disabled:checked:bg-gray-300">
                                            <svg viewBox="0 0 14 14" fill="none" class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 stroke-white size-4">
                                                <path d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="check-path opacity-0 group-has-checked:opacity-100"></path>
                                                <path d="M3 7H11" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="dash-path opacity-0"></path>
                                            </svg> 
                                        </div>
                                        <span style="${l?`text-decoration-line: line-through`:``}">${v(r)}</span>
                                    </li>`):i.push(`<li>${v(r)}</li>`)}else{for(;a.length>0;){let e=a.pop();i.push(e?.type===`ol`?`</ol>`:`</ul>`)}if(!(r.trim()===``&&n>0))if(r.trim()===``)i.push(`<div class="h-4"></div>`);else{let e=r.match(/^#/)?``:n>0?`div`:`p`,t=v(r);t.startsWith(`### `)?i.push(`<h3 class="text-xl font-bold mt-4 mb-2">${t.replace(`### `,``)}</h3>`):t.startsWith(`## `)?i.push(`<h2 class="text-2xl font-bold mt-6 mb-3 border-b pb-1">${t.replace(`## `,``)}</h2>`):t.startsWith(`# `)?i.push(`<h1 class="text-3xl font-extrabold mt-6 mb-4">${t.replace(`# `,``)}</h1>`):e?i.push(`<${e} class="my-2">${t}</${e}>`):i.push(t)}}});a.length>0;){let e=a.pop();i.push(e?.type===`ol`?`</ol>`:`</ul>`)}for(;o>0;)i.push(`</blockquote>`),o--;let s=i.join(`
`);return s=s.replace(/((?:<p\s?.+?>\|.+?\|<\/p>\n?)+)/g,e=>{let t=e.replace(/<p\s?.+?>(.*?)<\/p>/g,`$1`).trim().split(`
`).map(e=>e.split(`|`).filter(e=>e)),n=`<div class="table-container overflow-x-auto my-4"><table class="min-w-full border-collapse border border-gray-300 text-sm">`,r=t[0];n+=`<thead class="bg-gray-800 text-white"><tr>`,r.forEach(e=>{n+=`<th class="border border-gray-300 px-4 py-2 text-left">${e.trim()}</th>`}),n+=`</tr></thead><tbody>`;for(let e=2;e<t.length;e++){let r=t[e];r.length!==0&&(n+=`<tr class="${e%2==0?`bg-white dark:bg-gray-600`:`bg-gray-50 dark:bg-gray-700`} hover:bg-gray-100 dark:hover:bg-gray-800!">`,r.forEach(e=>{n+=`<td class="border border-gray-300 px-4 py-2">${e.trim()}</td>`}),n+=`</tr>`)}return n+=`</tbody></table></div>`,n}),t.forEach(e=>{e.restore&&(s=e.restore(s))}),s},v=e=>e.replace(/\*\*(.*?)\*\*/g,`<strong class="font-bold">$1</strong>`).replace(/\*(.*?)\*/g,`<em class="italic">$1</em>`).replace(/`([^`]+)`/g,`<code class="bg-gray-200 dark:bg-gray-400 px-2 rounded text-red-500 font-mono text-sm">$1</code>`).replace(/!\[(.*?)]\((.*?)\)/g,`<img alt="$1" src="$2" class="max-w-full h-auto rounded shadow my-2" />`).replace(/\[(.*?)]\((.*?)\)/g,`<a href="$2" target="_blank" class="text-blue-600 hover:underline">$1</a>`).replace(/~~(.*?)~~/g,`<del class="text-gray-400">$1</del>`),y=e=>{let t=[],n=e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`);return n=n.replace(/^((#+)\s+)(.*)$/gm,`<span class="text-blue-600 font-bold">$1</span><span class="text-blue-800 font-bold">$3</span>`),n=n.replace(/```(\w*)([\s\S]*?)```/g,(e,n,r)=>{let i=`\`\`\`${n}<span class="codeblock text-gray-400 bg-gray-50 dark:bg-gray-800 rounded">${r}</span>\`\`\``;return t.push(i),`__CODEBLOCK_${t.length-1}__`}),n=n.replace(/`([^`]+)`/g,'<code class="text-red-500 bg-gray-100 dark:bg-gray-400! rounded-sm">`$1`</code>'),n=n.replace(/\*\*([^*]+)\*\*$/gm,`<strong class="font-bold text-gray-800">**$1**</strong>`),n=n.replace(/\*([^*]+)\*$/gm,`<span class="italic text-gray-600">*$1*</span>`),n=n.replace(/^(\s*)([-*]|\d+\.)(\s+)/gm,`$1<span class="text-yellow-600 font-bold">$2</span>$3`),n=n.replace(/^(&gt;)(.*)$/gm,`<span class="text-gray-400 border-gray-300">$1$2</span>`),n=n.replace(/\[([^\]]+)]\(([^)]+)\)/g,`<span class="text-blue-500">[$1]</span><span class="text-gray-400">($2)</span>`),n=n.replace(/(&lt;\/?[a-z0-9]+.*?&gt;)/gi,`<span class="text-purple-400">$1</span>`),n=n.replace(/__CODEBLOCK_(\d+)__/g,(e,n)=>t[parseInt(n)]),n.endsWith(`
`)&&(n+=` `),n};var b=[{label:`Monospace`,value:`monospace`},{label:`Cascadia Mono`,value:`"Cascadia Mono"`},{label:`Roboto Mono`,value:`"Roboto Mono"`},{label:`Fira Code`,value:`"Fira Code"`},{label:`Source Code Pro`,value:`"Source Code Pro"`},{label:`JetBrains Mono`,value:`"JetBrains Mono"`},{label:`Noto Sans Mono`,value:`"Noto Sans Mono"`},{label:`Oxygen Mono`,value:`"Oxygen Mono"`},{label:`IBM Plex Mono`,value:`"IBM Plex Mono"`},{label:`Ubuntu Mono`,value:`"Ubuntu Mono"`},{label:`SF Mono (Mac Os)`,value:`"SF Mono"`}],x=({value:e,onChange:t,className:n=``,plugins:r=[],scrollSync:o=!0,preview:c=!0,readOnly:d=!1,customFonts:f=[],defaultFont:p=`monospace`})=>{let[m,v]=(0,i.useState)(c),[x,S]=(0,i.useState)(``);(0,i.useEffect)(()=>{f.forEach(e=>{b.find(t=>t.value===e.value)||b.push(e)})},[f]);let[C,w]=(0,i.useState)(p),T=(0,i.useRef)(null),E=(0,i.useRef)(null),D=(0,i.useRef)(null),[O,k]=(0,i.useState)(o),A=(0,i.useRef)(null),[j,M]=(0,i.useState)({isOpen:!1,title:``,fields:[],onConfirm:()=>{}}),N=(0,i.useMemo)(()=>y(e),[e]),P=(0,i.useMemo)(()=>[...[h,g],...r],[r?.length]);(0,i.useLayoutEffect)(()=>{S(_(e,P))},[e,P]),(0,i.useLayoutEffect)(()=>{if(A.current&&T.current){let{start:e,end:t}=A.current;T.current.focus(),T.current.setSelectionRange(e,t),A.current=null}},[e]),(0,i.useLayoutEffect)(()=>{P.forEach(e=>{e.trigger&&e.trigger.beforeRender&&e.trigger.beforeRender()})},[P]),(0,i.useEffect)(()=>{P.forEach(e=>{e.trigger&&e.trigger.afterRender&&e.trigger.afterRender()})},[P]);let F=(0,i.useCallback)(e=>{let t=T.current,n=D.current,r=E.current;t&&(r&&(r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft),O&&n&&e===`editor`&&(n.scrollTop=t.scrollTop/(t.scrollHeight-t.clientHeight)*(n.scrollHeight-n.clientHeight)))},[O]),I=(0,i.useCallback)((n,r=``)=>{let i=T.current;if(!i)return;let a=i.selectionStart,o=i.selectionEnd,s=e.substring(a,o),c=e.substring(0,a)+n+s+r+e.substring(o);A.current={start:a+n.length,end:o+n.length},t(c)},[t,e]),L=e=>{let n=T.current;if(!n)return;let r=n.selectionStart,i=n.selectionEnd,a=n.value;if(e.key===`Tab`){e.preventDefault();let n=a.lastIndexOf(`
`,r-1)+1;if(e.shiftKey){if(a.substring(n,n+2)===`  `){let e=a.substring(0,n)+a.substring(n+2);A.current={start:Math.max(n,r-2),end:Math.max(n,i-2)},t(e)}}else{let e=a.substring(0,r)+`  `+a.substring(i);A.current={start:r+2,end:i+2},t(e)}return}if(e.key===`Enter`){let n=a.lastIndexOf(`
`,r-1),o=a.substring(n+1,r).match(/^(\s*)([-*]|\d+\.|- \[[ x]]|>)\s(.*)/);if(o){e.preventDefault();let s=o[1],c=o[2];if(!o[3].trim()){if(s.length>=2){let e=s.substring(0,s.length-2),i=n+1,o=a.substring(0,i)+e+c+` `+a.substring(r);A.current={start:i+e.length+c.length+1,end:i+e.length+c.length+1},t(o)}else{let e=a.substring(0,n+1)+a.substring(r);A.current={start:n+1,end:n+1},t(e)}return}let l=c;c.match(/^\d+\.$/)&&(l=`${parseInt(c)+1}.`),c.includes(`[x]`)&&(l=`- [ ]`);let u=`\n${s}${l} `,d=a.substring(0,r)+u+a.substring(i);A.current={start:r+u.length,end:r+u.length},t(d);return}}},R=e=>{M({isOpen:!0,title:e.title,fields:e.fields,onConfirm:t=>{e.onConfirm(t),M(e=>({...e,isOpen:!1}))}})};return(0,a.jsxs)(`div`,{className:`editor-container flex flex-col border border-gray-200 dark:border-gray-500 rounded-lg bg-white dark:bg-slate-800 shadow-sm overflow-hidden h-150 font-sans ${n}`,children:[(0,a.jsx)(s,{isOpen:j.isOpen,title:j.title,fields:j.fields,onClose:()=>M(e=>({...e,isOpen:!1})),onConfirm:j.onConfirm}),(0,a.jsxs)(`div`,{className:`header-bar flex items-center justify-between gap-3 px-3 py-2 border-b border-gray-200 dark:border-gray-500 bg-gray-50 dark:bg-slate-800 select-none`,children:[(0,a.jsx)(`div`,{className:`left-tools flex items-center gap-1 p-1 overflow-x-auto scrollbar-hide`,children:d?(0,a.jsx)(`div`,{className:`read-only-title text-sm text-gray-600`,children:`Read-Only Mode`}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l,{icon:(0,a.jsx)(u.Heading,{}),onClick:()=>I(`## `),tooltip:`Heading`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.Bold,{}),onClick:()=>I(`**`,`**`),tooltip:`Bold`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.Italic,{}),onClick:()=>I(`*`,`*`),tooltip:`Italic`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.Strike,{}),onClick:()=>I(`~~`,`~~`),tooltip:`Strikethrough`}),(0,a.jsx)(`div`,{className:`divide w-px h-5 bg-gray-300 mx-2`}),(0,a.jsxs)(`div`,{className:`font-selector relative group flex items-center`,children:[(0,a.jsx)(`span`,{className:`font-selector-label text-xs text-gray-400 font-bold mr-1`,children:`FONT:`}),(0,a.jsxs)(`div`,{className:`select-input relative`,children:[(0,a.jsx)(`select`,{className:`appearance-none bg-transparent hover:bg-gray-100 text-gray-600 text-xs font-medium py-1.5 pl-2 pr-6 rounded cursor-pointer focus:outline-1 focus:outline-blue-400 border-none dark:border-gray-500 hover:border-gray-200 transition-colors`,value:C,onChange:e=>w(e.target.value),title:`Change Editor Font`,children:b.map(e=>(0,a.jsxs)(`option`,{value:e.value,children:[e.label,` `,e.value===p?`(Default)`:``]},e.value))}),(0,a.jsx)(`div`,{className:`custom-arrow pointer-events-none absolute inset-y-0 right-0 flex items-center px-1 text-gray-400`,children:(0,a.jsx)(`svg`,{className:`fill-current size-3`,xmlns:`http://www.w3.org/2000/svg`,viewBox:`0 0 20 20`,children:(0,a.jsx)(`path`,{d:`M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z`})})})]})]}),(0,a.jsx)(`div`,{className:`divide w-px h-5 bg-gray-300 mx-2`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.Quote,{}),onClick:()=>I(`> `),tooltip:`Blockquote`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.List,{}),onClick:()=>I(`* `),tooltip:`List`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.ListOrdered,{}),onClick:()=>I(`1. `),tooltip:`Ordered List`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.Check,{}),onClick:()=>I(`- [ ] `),tooltip:`Task`}),(0,a.jsx)(`div`,{className:`divide w-px h-5 bg-gray-300 mx-2`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.Table,{}),onClick:()=>I(`
| Header | Header |
| --- | --- |
| Cell | Cell |
`),tooltip:`Table`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.Image,{}),onClick:()=>{R({title:`Insert Image`,fields:[{key:`alt`,label:`Alt Text`,type:`text`,placeholder:`Image description`},{key:`url`,label:`Image URL`,type:`text`,placeholder:`https://example.com/image.jpg`}],onConfirm:e=>I(`![${e.alt}](${e.url})`)})},tooltip:`Image`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.Link,{}),onClick:()=>{R({title:`Insert Link`,fields:[{key:`text`,label:`Link Text`,type:`text`,placeholder:`Click me`},{key:`url`,label:`URL`,type:`text`,placeholder:`https://example.com`}],onConfirm:e=>I(`[${e.text}](${e.url})`)})},tooltip:`Link`}),(0,a.jsx)(l,{icon:(0,a.jsx)(u.Code,{}),onClick:()=>I("```\n","\n```"),tooltip:`Code Block`}),(0,a.jsx)(`div`,{className:`divide w-px h-5 bg-gray-300 mx-2`}),P.sort((e,t)=>e.toolbarOrder&&t.toolbarOrder?e.toolbarOrder>t.toolbarOrder?1:-1:e.name>t.name?1:-1).map(e=>e.showInToolbar?(0,a.jsx)(l,{icon:e.icon,onClick:()=>{e.onToolbarClick&&e.onToolbarClick({openDialog:R,insertText:I})},tooltip:e.tooltip?e.tooltip:e.name.charAt(0).toUpperCase()+e.name.slice(1)},e.name):null)]})}),(0,a.jsxs)(`div`,{className:`right-tools flex items-center gap-3 p-1 pl-4 border-l border-gray-300`,children:[(0,a.jsxs)(`div`,{className:`sync-switch flex items-center gap-2 text-xs font-medium text-gray-600`,children:[(0,a.jsx)(`span`,{children:`Scroll Sync`}),(0,a.jsxs)(`div`,{className:`switch relative`,onClick:()=>k(!O),children:[(0,a.jsx)(`input`,{type:`checkbox`,checked:O,className:`peer w-8 h-4 rounded-full p-1 appearance-none bg-gray-300 checked:bg-blue-500 focus:outline-1 focus:outline-blue-400`}),(0,a.jsx)(`div`,{className:`slider absolute top-0.5 left-0.5 peer-checked:translate-x-4 bg-white w-3 h-3 rounded-full shadow-md transform duration-300`})]})]}),(0,a.jsx)(`button`,{"data-preview":m?`true`:`false`,onClick:()=>v(!m),className:`eye-button p-1.5 rounded hover:bg-gray-200 ring-0 focus:outline-1 focus:outline-blue-400 ${m?`text-gray-500`:`bg-gray-200 text-blue-600`}`,title:m?`Hide Preview`:`Show Preview`,children:m?(0,a.jsx)(u.Eye,{}):(0,a.jsx)(u.EyeOff,{})})]})]}),(0,a.jsxs)(`div`,{className:`editor-area flex-1 flex overflow-hidden`,children:[(0,a.jsxs)(`div`,{"data-preview":m?`true`:`false`,className:`editor-col relative box-border flex flex-col ${m?`w-1/2`:`w-full`}`,style:{fontFamily:C},children:[(0,a.jsx)(`pre`,{ref:E,"aria-hidden":`true`,dangerouslySetInnerHTML:{__html:N},className:`relative bg-white dark:bg-slate-900 dark:text-gray-400 w-full h-full box-border inset-0 m-0 p-4 text-sm antialiased leading-relaxed border-none resize-none outline-none whitespace-pre-wrap overflow-auto`}),(0,a.jsx)(`textarea`,{ref:T,value:e,cols:100,onChange:e=>t(e.target.value),onScroll:()=>F(`editor`),onKeyDown:L,placeholder:`Type your markdown here...`,spellCheck:!1,readOnly:d,className:`absolute text-transparent bg-transparent caret-black z-10 w-full h-full box-border inset-0 m-0 p-4 text-sm antialiased leading-relaxed border-none resize-none outline-none whitespace-pre-wrap overflow-auto ${m?`border-r border-gray-200`:``}`})]}),m&&(0,a.jsxs)(`div`,{className:`preview-col w-1/2 h-full flex flex-col box-border bg-gray-50 dark:bg-slate-900 dark:text-gray-400`,children:[(0,a.jsx)(`div`,{className:`preview-header px-3 py-1 bg-gray-100 dark:bg-gray-800 border-b border-b-gray-200 dark:border-b-gray-500 text-xs text-gray-500 dark:text-gray-400 font-semibold uppercase tracking-wider`,children:`Preview`}),(0,a.jsx)(`div`,{ref:D,className:`preview flex-1 h-full box-border overflow-y-auto p-8 text-gray-800 dark:text-gray-200`,style:{fontFamily:C},dangerouslySetInnerHTML:{__html:x}})]})]})]})},S=x;x.__docgenInfo={description:``,methods:[],displayName:`MarkdownEditor`,props:{className:{defaultValue:{value:`''`,computed:!1},required:!1},plugins:{defaultValue:{value:`[]`,computed:!1},required:!1},scrollSync:{defaultValue:{value:`true`,computed:!1},required:!1},preview:{defaultValue:{value:`true`,computed:!1},required:!1},readOnly:{defaultValue:{value:`false`,computed:!1},required:!1},customFonts:{defaultValue:{value:`[]`,computed:!1},required:!1},defaultFont:{defaultValue:{value:`'monospace'`,computed:!1},required:!1}}};var C=({value:e,onChange:t,className:n,plugins:r=[],scrollSync:o=!0,preview:s=!0,readOnly:c=!1})=>{let[l,u]=(0,i.useState)(e);return(0,a.jsx)(S,{value:l,onChange:e=>{u(e),t(e)},plugins:r,scrollSync:o,preview:s,readOnly:c,className:n})},w=C;C.__docgenInfo={description:``,methods:[],displayName:`MarkdownEditorPreview`,props:{value:{required:!0,tsType:{name:`string`},description:``},onChange:{required:!0,tsType:{name:`signature`,type:`function`,raw:`(value: string) => void`,signature:{arguments:[{type:{name:`string`},name:`value`}],return:{name:`void`}}},description:``},className:{required:!1,tsType:{name:`string`},description:``},plugins:{required:!1,tsType:{name:`Array`,elements:[{name:`MarkdownPlugin`}],raw:`MarkdownPlugin[]`},description:``,defaultValue:{value:`[]`,computed:!1}},scrollSync:{required:!1,tsType:{name:`boolean`},description:``,defaultValue:{value:`true`,computed:!1}},preview:{required:!1,tsType:{name:`boolean`},description:``,defaultValue:{value:`true`,computed:!1}},readOnly:{required:!1,tsType:{name:`boolean`},description:``,defaultValue:{value:`false`,computed:!1}}}};var T=t({Demo:()=>O,__namedExportsOrder:()=>k,default:()=>D}),{fn:E}=__STORYBOOK_MODULE_TEST__,D={title:`Example/MarkdownEditor`,component:w,parameters:{layout:`centered`},argTypes:{value:{control:`text`},onChange:{action:`value changed`},className:{control:`text`},scrollSync:{control:`boolean`},preview:{control:`boolean`},plugins:{control:`object`}},args:{value:`## Hello Markdown Editor

This is a **Markdown Editor** component with live preview and scroll sync features.`,onChange:E(),className:`w-full`,scrollSync:!0,preview:!0,plugins:[]}};const O={args:{value:`# Features Demo

## Features

* CommonMark + GFM Specifications
    * Live Preview
    * Scroll Sync
* Auto Indent
* Syntax Highlight
    1. Markdown
    2. Preview

## Quotes

> See the table below for default options
>> More API information can be found in the document

## Table

| name | type | description |
|---|---|---|
| el | \`HTMLElement\` | container element |
| el | \`HTMLElement\` | container element |
| el | \`HTMLElement\` | container element |

## Links
[Google](https://google.com)

## Images
![Alt text](https://placehold.co/400)

## Lists
- Item 1
- Item 2
    - Subitem 1
    - Subitem 2
- Item 3

1. First
2. Second
3. Third

## Task List
- [x] Task 0
- [ ] Task 1
- [ ] Task level 1
    - [ ] Task level 2
## Code blocks
\`\`\`javascript
const test = 123
if (test === 123) {
    console.log('Hello World')
}

if (test > 122) {
    console.log('Greater than 122')
}
\`\`\`
  `,onChange:E(),className:`w-full`,scrollSync:!0,preview:!0,plugins:[]}};O.parameters={...O.parameters,docs:{...O.parameters?.docs,source:{originalSource:"{\n  args: {\n    value: \"# Features Demo\\n\\n## Features\\n\\n* CommonMark + GFM Specifications\\n    * Live Preview\\n    * Scroll Sync\\n* Auto Indent\\n* Syntax Highlight\\n    1. Markdown\\n    2. Preview\\n\\n## Quotes\\n\\n> See the table below for default options\\n>> More API information can be found in the document\\n\\n## Table\\n\\n| name | type | description |\\n|---|---|---|\\n| el | `HTMLElement` | container element |\\n| el | `HTMLElement` | container element |\\n| el | `HTMLElement` | container element |\\n\\n## Links\\n[Google](https://google.com)\\n\\n## Images\\n![Alt text](https://placehold.co/400)\\n\\n## Lists\\n- Item 1\\n- Item 2\\n    - Subitem 1\\n    - Subitem 2\\n- Item 3\\n\\n1. First\\n2. Second\\n3. Third\\n\\n## Task List\\n- [x] Task 0\\n- [ ] Task 1\\n- [ ] Task level 1\\n    - [ ] Task level 2\\n## Code blocks\\n```javascript\\nconst test = 123\\nif (test === 123) {\\n    console.log('Hello World')\\n}\\n\\nif (test > 122) {\\n    console.log('Greater than 122')\\n}\\n```\\n  \",\n    onChange: fn(),\n    className: 'w-full',\n    scrollSync: true,\n    preview: true,\n    plugins: []\n  }\n}",...O.parameters?.docs?.source}}};const k=[`Demo`];export{T as i,k as n,D as r,O as t};