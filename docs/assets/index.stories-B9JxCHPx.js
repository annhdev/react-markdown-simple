import{E as e,T as t,a as n,t as r}from"./iframe-CXFVjB1H.js";import{a as i,i as a,n as o,r as s,t as c}from"./parser_engine-B3RHNxdo.js";const l=[[`undo`,`redo`],[`heading`,`bold`,`italic`,`strike`,`font`],[`quote`,`list`,`list-ordered`,`check`],[`table`,`image`,`link`,`code`],[`raw-image`,`youtube-embed`,`test`],[`scrollSync`,`preview`]],u=[{label:`Monospace`,value:`monospace`},{label:`Cascadia Mono`,value:`"Cascadia Mono"`},{label:`Roboto Mono`,value:`"Roboto Mono"`},{label:`Fira Code`,value:`"Fira Code"`},{label:`Source Code Pro`,value:`"Source Code Pro"`},{label:`JetBrains Mono`,value:`"JetBrains Mono"`},{label:`Noto Sans Mono`,value:`"Noto Sans Mono"`},{label:`Oxygen Mono`,value:`"Oxygen Mono"`},{label:`IBM Plex Mono`,value:`"IBM Plex Mono"`},{label:`Ubuntu Mono`,value:`"Ubuntu Mono"`}];var d=r(),f={Bold:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`path`,{d:`M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z`}),(0,d.jsx)(`path`,{d:`M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z`})]}),Italic:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`line`,{x1:`19`,y1:`4`,x2:`10`,y2:`4`}),(0,d.jsx)(`line`,{x1:`14`,y1:`20`,x2:`5`,y2:`20`}),(0,d.jsx)(`line`,{x1:`15`,y1:`4`,x2:`9`,y2:`20`})]}),Strike:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`path`,{d:`M5 12h14`}),(0,d.jsx)(`path`,{d:`M4 6h16`,opacity:`0.5`}),(0,d.jsx)(`path`,{d:`M4 18h16`,opacity:`0.5`})]}),Heading:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`path`,{d:`M6 12h12`}),(0,d.jsx)(`path`,{d:`M6 20V4`}),(0,d.jsx)(`path`,{d:`M18 20V4`})]}),Quote:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`path`,{d:`M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z`}),(0,d.jsx)(`path`,{d:`M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z`})]}),List:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`line`,{x1:`8`,y1:`6`,x2:`21`,y2:`6`}),(0,d.jsx)(`line`,{x1:`8`,y1:`12`,x2:`21`,y2:`12`}),(0,d.jsx)(`line`,{x1:`8`,y1:`18`,x2:`21`,y2:`18`}),(0,d.jsx)(`line`,{x1:`3`,y1:`6`,x2:`3.01`,y2:`6`}),(0,d.jsx)(`line`,{x1:`3`,y1:`12`,x2:`3.01`,y2:`12`}),(0,d.jsx)(`line`,{x1:`3`,y1:`18`,x2:`3.01`,y2:`18`})]}),ListOrdered:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`line`,{x1:`10`,y1:`6`,x2:`21`,y2:`6`}),(0,d.jsx)(`line`,{x1:`10`,y1:`12`,x2:`21`,y2:`12`}),(0,d.jsx)(`line`,{x1:`10`,y1:`18`,x2:`21`,y2:`18`}),(0,d.jsx)(`path`,{d:`M4 6h1v4`}),(0,d.jsx)(`path`,{d:`M4 10h2`}),(0,d.jsx)(`path`,{d:`M6 18H4c0-1 2-2 2-3s-1-1.5-2-1`})]}),Check:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`polyline`,{points:`9 11 12 14 22 4`}),(0,d.jsx)(`path`,{d:`M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11`})]}),Table:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`2`}),(0,d.jsx)(`path`,{d:`M3 9h18`}),(0,d.jsx)(`path`,{d:`M12 21V9`})]}),Image:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`rect`,{x:`3`,y:`3`,width:`18`,height:`18`,rx:`2`,ry:`2`}),(0,d.jsx)(`circle`,{cx:`8.5`,cy:`8.5`,r:`1.5`}),(0,d.jsx)(`polyline`,{points:`21 15 16 10 5 21`})]}),Link:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`path`,{d:`M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71`}),(0,d.jsx)(`path`,{d:`M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71`})]}),Code:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`polyline`,{points:`16 18 22 12 16 6`}),(0,d.jsx)(`polyline`,{points:`8 6 2 12 8 18`})]}),Eye:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`path`,{d:`M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z`}),(0,d.jsx)(`circle`,{cx:`12`,cy:`12`,r:`3`})]}),EyeOff:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`path`,{d:`M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24`}),(0,d.jsx)(`line`,{x1:`1`,y1:`1`,x2:`23`,y2:`23`})]}),Copy:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`rect`,{x:`9`,y:`9`,width:`13`,height:`13`,rx:`2`,ry:`2`}),(0,d.jsx)(`path`,{d:`M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1`})]}),CheckSimple:()=>(0,d.jsx)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,d.jsx)(`polyline`,{points:`20 6 9 17 4 12`})}),Youtube:()=>(0,d.jsxs)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:[(0,d.jsx)(`rect`,{x:`2`,y:`5`,width:`20`,height:`14`,rx:`4`,ry:`4`}),(0,d.jsx)(`polygon`,{points:`10 9 15 12 10 15 10 9`})]}),Font:()=>(0,d.jsx)(`svg`,{viewBox:`0 0 640 640`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,d.jsx)(`path`,{d:`M349.1 114.7C343.9 103.3 332.5 96 320 96C307.5 96 296.1 103.3 290.9 114.7L123.5 480L112 480C94.3 480 80 494.3 80 512C80 529.7 94.3 544 112 544L200 544C217.7 544 232 529.7 232 512C232 494.3 217.7 480 200 480L193.9 480L215.9 432L424.2 432L446.2 480L440.1 480C422.4 480 408.1 494.3 408.1 512C408.1 529.7 422.4 544 440.1 544L528.1 544C545.8 544 560.1 529.7 560.1 512C560.1 494.3 545.8 480 528.1 480L516.6 480L349.2 114.7zM394.8 368L245.2 368L320 204.8L394.8 368z`})}),Undo:()=>(0,d.jsx)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,d.jsx)(`path`,{d:`M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3`})}),Redo:()=>(0,d.jsx)(`svg`,{viewBox:`0 0 24 24`,className:`size-4`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,strokeLinecap:`round`,strokeLinejoin:`round`,children:(0,d.jsx)(`path`,{d:`M15 15l6-6m0 0l-6-6m6 6H9a6 6 0 000 12h3`})})};const p=e=>{let t=[],n=e.replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`);return n=n.replace(/^((#+)\s+)(.*)$/gm,`<span class="text-blue-600 font-bold">$1</span><span class="text-blue-800 font-bold">$3</span>`),n=n.replace(/```(\w*)([\s\S]*?)```/g,(e,n,r)=>{let i=`\`\`\`${n}<span class="codeblock text-gray-400 bg-gray-50 dark:bg-gray-800 rounded">${r}</span>\`\`\``;return t.push(i),`__CODEBLOCK_${t.length-1}__`}),n=n.replace(/`([^`]+)`/g,'<code class="text-red-500 bg-gray-100 dark:bg-gray-400! rounded-sm">`$1`</code>'),n=n.replace(/\*\*([^*]+)\*\*$/gm,`<strong class="font-bold text-gray-800">**$1**</strong>`),n=n.replace(/\*([^*]+)\*$/gm,`<span class="italic text-gray-600">*$1*</span>`),n=n.replace(/^(\s*)([-*]|\d+\.)(\s+)/gm,`$1<span class="text-yellow-600 font-bold">$2</span>$3`),n=n.replace(/^(&gt;)(.*)$/gm,`<span class="text-gray-400 border-gray-300">$1$2</span>`),n=n.replace(/\[([^\]]+)]\(([^)]+)\)/g,`<span class="text-blue-500">[$1]</span><span class="text-gray-400">($2)</span>`),n=n.replace(/(&lt;\/?[a-z0-9]+.*?&gt;)/gi,`<span class="text-purple-400">$1</span>`),n=n.replace(/__CODEBLOCK_(\d+)__/g,(e,n)=>t[parseInt(n)]),n.endsWith(`
`)&&(n+=` `),n};var m=n(),h=({isOpen:e,title:t,fields:n,onClose:r,onConfirm:i})=>{let[a,o]=(0,m.useState)(()=>{let e={};return n.forEach(t=>{e[t.key]=t.defaultValue||(t.options?t.options[0].value:``)}),e}),s=(e,t)=>{o(n=>({...n,[e]:t}))};return e?(0,d.jsx)(`div`,{className:`editor-dialog-container fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-in fade-in duration-200`,children:(0,d.jsxs)(`div`,{className:`editor-dialog bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden`,children:[(0,d.jsxs)(`div`,{className:`dialog-header bg-gray-50 px-6 py-4 border-b border-gray-100 flex justify-between items-center`,children:[(0,d.jsx)(`h3`,{className:`title font-semibold text-gray-800`,children:t}),(0,d.jsx)(`button`,{onClick:r,className:`close-btn text-gray-400 hover:text-gray-600`,children:`âœ•`})]}),(0,d.jsx)(`div`,{className:`dialog-body p-6 space-y-4`,children:n.map(e=>(0,d.jsxs)(`div`,{className:`dialog-field box-border`,children:[(0,d.jsx)(`span`,{className:`label block text-xs font-semibold text-gray-500 uppercase mb-1`,children:e.label}),e.type===`select`?(0,d.jsx)(`select`,{className:`w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none bg-white`,value:a[e.key]||``,onChange:t=>s(e.key,t.target.value),children:e.options?.map(e=>(0,d.jsx)(`option`,{value:e.value,children:e.label},e.value))}):(0,d.jsx)(`input`,{type:`text`,name:e.key,className:`w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 outline-none`,value:a[e.key]||``,onChange:t=>s(e.key,t.target.value),placeholder:e.placeholder,autoFocus:n[0].key===e.key})]},e.key))}),(0,d.jsxs)(`div`,{className:`dialog-footer px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-end gap-2`,children:[(0,d.jsx)(`button`,{onClick:r,className:`close-btn px-4 py-2 text-sm text-gray-600 hover:bg-gray-100 rounded-lg`,children:`Cancel`}),(0,d.jsx)(`button`,{onClick:()=>i(a),className:`submit-btn px-4 py-2 text-sm text-white bg-blue-600 hover:bg-blue-700 rounded-lg font-medium shadow-sm`,children:`Insert`})]})]})}):null},g=h;h.__docgenInfo={description:``,methods:[],displayName:`InsertDialog`,props:{isOpen:{required:!0,tsType:{name:`boolean`},description:``},title:{required:!0,tsType:{name:`string`},description:``},fields:{required:!0,tsType:{name:`Array`,elements:[{name:`DialogField`}],raw:`DialogField[]`},description:``},onClose:{required:!0,tsType:{name:`signature`,type:`function`,raw:`() => void`,signature:{arguments:[],return:{name:`void`}}},description:``},onConfirm:{required:!0,tsType:{name:`signature`,type:`function`,raw:`(data: Record<string, string>) => void`,signature:{arguments:[{type:{name:`Record`,elements:[{name:`string`},{name:`string`}],raw:`Record<string, string>`},name:`data`}],return:{name:`void`}}},description:``}}};var _=({icon:e,onClick:t,tooltip:n,disabled:r=!1})=>(0,d.jsx)(`button`,{type:`button`,onClick:t,disabled:r,className:`tool-button appearance-none p-1.5 text-gray-600 disabled:text-gray-300 dark:text-gray-300 dark:disabled:text-gray-600 rounded focus:border-none focus:shadow-none focus:ring-0 focus:outline-1 focus:outline-blue-400 hover:bg-gray-200 disabled:hover:bg-transparent hover:text-black`,title:n,"aria-label":n,children:e}),v=_;_.__docgenInfo={description:``,methods:[],displayName:`ToolButton`,props:{icon:{required:!0,tsType:{name:`ReactReactNode`,raw:`React.ReactNode`},description:``},onClick:{required:!0,tsType:{name:`signature`,type:`function`,raw:`() => void`,signature:{arguments:[],return:{name:`void`}}},description:``},tooltip:{required:!0,tsType:{name:`string`},description:``},disabled:{required:!1,tsType:{name:`boolean`},description:``,defaultValue:{value:`false`,computed:!1}}}};var y=({title:e,defaultChecked:t=!0,onChange:n,disabled:r})=>(0,d.jsxs)(`div`,{className:`sync-switch flex items-center gap-2 text-xs font-medium text-gray-600`,children:[e?(0,d.jsx)(`span`,{className:`text-xs`,children:e}):null,(0,d.jsxs)(`label`,{className:`switch relative w-8 h-4`,"aria-label":`Toggle Scroll Sync`,children:[(0,d.jsx)(`input`,{type:`checkbox`,defaultChecked:t,onChange:n,disabled:r,className:`peer w-8 h-4 rounded-full p-1 appearance-none bg-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 checked:bg-blue-500   focus:outline-1 focus:outline-blue-400`}),(0,d.jsx)(`div`,{className:`slider absolute top-1/2 left-0.5 -translate-y-1/2 peer-checked:translate-x-4 bg-white w-3 h-3 rounded-full shadow-md transform duration-300`})]})]}),b=y;y.__docgenInfo={description:``,methods:[],displayName:`Switch`,props:{title:{required:!1,tsType:{name:`string`},description:``},defaultChecked:{required:!1,tsType:{name:`boolean`},description:``,defaultValue:{value:`true`,computed:!1}},onChange:{required:!0,tsType:{name:`signature`,type:`function`,raw:`(event: ChangeEvent<HTMLInputElement>) => void`,signature:{arguments:[{type:{name:`ChangeEvent`,elements:[{name:`HTMLInputElement`}],raw:`ChangeEvent<HTMLInputElement>`},name:`event`}],return:{name:`void`}}},description:``},disabled:{required:!1,tsType:{name:`boolean`},description:``}}};var x=({value:e,onChange:t,className:n=``,plugins:r=[],scrollSync:h=!0,preview:_=!0,showPreviewHeader:y=!0,readOnly:x=!1,customFonts:S=[],defaultFont:C=`monospace`,toolbar:w=l,wordLimit:T=500,characterLimit:E=2e3,showToolbar:D=!0,showFooterBar:O=!0})=>{let[k,ee]=(0,m.useState)(_),[A,te]=(0,m.useState)(``);(0,m.useEffect)(()=>{S.forEach(e=>{u.find(t=>t.value===e.value)||u.push(e)})},[S]);let[j,ne]=(0,m.useState)(C),M=(0,m.useRef)(null),N=(0,m.useRef)(null),P=(0,m.useRef)(null),[F,re]=(0,m.useState)(h),I=(0,m.useRef)(null),L=(0,m.useRef)({past:[],future:[]}),[ie,R]=(0,m.useState)(0),z=(0,m.useRef)(null),[B,V]=(0,m.useState)({isOpen:!1,title:``,fields:[],onConfirm:()=>{}}),ae=(0,m.useMemo)(()=>p(e),[e]),H=(0,m.useMemo)(()=>{let t=e.trim();return t?{words:t.split(/\s+/).filter(Boolean).length,chars:t.length}:{words:0,chars:0}},[e]),U=T&&H.words>T||E&&H.chars>E,W=(0,m.useMemo)(()=>[...[i,a,s,o],...r],[r?.length]);(0,m.useLayoutEffect)(()=>{te(c(e,W))},[e,W]),(0,m.useLayoutEffect)(()=>{if(I.current&&M.current){let{start:e,end:t}=I.current;M.current.focus(),M.current.setSelectionRange(e,t),I.current=null}},[e]),(0,m.useLayoutEffect)(()=>{W.forEach(e=>{e.trigger&&e.trigger.beforeRender&&e.trigger.beforeRender()})},[W]),(0,m.useEffect)(()=>{W.forEach(e=>{e.trigger&&e.trigger.afterRender&&e.trigger.afterRender()})},[W]);let G=(0,m.useCallback)((t,n=!1)=>{if(x)return;let r=()=>{L.current.past[L.current.past.length-1]!==e&&(L.current.past.push(e),L.current.future=[],R(e=>e+1))};n?(z.current&&clearTimeout(z.current),r()):(z.current&&clearTimeout(z.current),z.current=setTimeout(r,500))},[e,x]),K=(0,m.useCallback)(()=>{if(L.current.past.length===0||x)return;let n=L.current.past.pop();n!==void 0&&(L.current.future.push(e),t(n),R(e=>e+1))},[t,x,e]),q=(0,m.useCallback)(()=>{if(L.current.future.length===0||x)return;let n=L.current.future.pop();n!==void 0&&(L.current.past.push(e),t(n),R(e=>e+1))},[t,x,e]),J=(0,m.useCallback)(e=>{let t=M.current,n=P.current,r=N.current;t&&(r&&(r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft),F&&n&&e===`editor`&&(n.scrollTop=t.scrollTop/(t.scrollHeight-t.clientHeight)*(n.scrollHeight-n.clientHeight)))},[F]),oe=e=>{if(x||U)return;let n=e.target.value;G(n,!1),t(n)},Y=(0,m.useCallback)((n,r=``)=>{let i=M.current;if(!i||U)return;G(e,!0);let a=i.selectionStart,o=i.selectionEnd,s=e.substring(a,o),c=e.substring(0,a)+n+s+r+e.substring(o);I.current={start:a+n.length,end:o+n.length},t(c)},[U,t,G,e]),se=e=>{let n=M.current;if(!n)return;let r=n.selectionStart,i=n.selectionEnd,a=n.value;if(e.key===`Tab`){e.preventDefault();let n=a.lastIndexOf(`
`,r-1)+1;if(e.shiftKey){if(a.substring(n,n+2)===`  `){let e=a.substring(0,n)+a.substring(n+2);I.current={start:Math.max(n,r-2),end:Math.max(n,i-2)},t(e)}}else{let e=a.substring(0,r)+`  `+a.substring(i);I.current={start:r+2,end:i+2},t(e)}return}if(e.key===`Enter`){let n=a.lastIndexOf(`
`,r-1),o=a.substring(n+1,r).match(/^(\s*)([-*]|\d+\.|- \[[ x]]|>)\s(.*)/);if(o){e.preventDefault();let s=o[1],c=o[2];if(!o[3].trim()){if(s.length>=2){let e=s.substring(0,s.length-2),i=n+1,o=a.substring(0,i)+e+c+` `+a.substring(r);I.current={start:i+e.length+c.length+1,end:i+e.length+c.length+1},t(o)}else{let e=a.substring(0,n+1)+a.substring(r);I.current={start:n+1,end:n+1},t(e)}return}let l=c;c.match(/^\d+\.$/)&&(l=`${parseInt(c)+1}.`),c.includes(`[x]`)&&(l=`- [ ]`);let u=`\n${s}${l} `,d=a.substring(0,r)+u+a.substring(i);I.current={start:r+u.length,end:r+u.length},t(d);return}}},X=e=>{V({isOpen:!0,title:e.title,fields:e.fields,onConfirm:t=>{e.onConfirm(t),V(e=>({...e,isOpen:!1}))}})},Z=(0,m.useCallback)(()=>{X({title:`Insert Link`,fields:[{key:`text`,label:`Link Text`,type:`text`,placeholder:`Click me`},{key:`url`,label:`URL`,type:`text`,placeholder:`https://example.com`}],onConfirm:e=>Y(`[${e.text}](${e.url})`)})},[Y]),Q=(0,m.useCallback)(()=>{X({title:`Insert Image`,fields:[{key:`alt`,label:`Alt Text`,type:`text`,placeholder:`Image description`},{key:`url`,label:`Image URL`,type:`text`,placeholder:`https://example.com/image.jpg`}],onConfirm:e=>Y(`![${e.alt}](${e.url})`)})},[Y]),$=(0,m.useMemo)(()=>{let e={undo:{icon:(0,d.jsx)(f.Undo,{}),toolbarButtonType:`button`,tooltip:`Undo`,action:K,disabled:L.current.past.length===0},redo:{icon:(0,d.jsx)(f.Redo,{}),toolbarButtonType:`button`,tooltip:`Redo`,action:q,disabled:L.current.future.length===0},heading:{icon:(0,d.jsx)(f.Heading,{}),toolbarButtonType:`button`,tooltip:`Heading`,action:()=>Y(`## `)},bold:{icon:(0,d.jsx)(f.Bold,{}),toolbarButtonType:`button`,tooltip:`Bold`,action:()=>Y(`**`,`**`)},italic:{icon:(0,d.jsx)(f.Italic,{}),toolbarButtonType:`button`,tooltip:`Italic`,action:()=>Y(`*`,`*`)},strike:{icon:(0,d.jsx)(f.Strike,{}),toolbarButtonType:`button`,tooltip:`Strike`,action:()=>Y(`~~`,`~~`)},quote:{icon:(0,d.jsx)(f.Quote,{}),toolbarButtonType:`button`,tooltip:`Quote`,action:()=>Y(`> `)},list:{icon:(0,d.jsx)(f.List,{}),toolbarButtonType:`button`,tooltip:`List`,action:()=>Y(`- `)},"list-ordered":{icon:(0,d.jsx)(f.ListOrdered,{}),toolbarButtonType:`button`,tooltip:`Ordered List`,action:()=>Y(`1. `)},check:{icon:(0,d.jsx)(f.Check,{}),toolbarButtonType:`button`,tooltip:`Task List`,action:()=>Y(`- [ ] `)},code:{icon:(0,d.jsx)(f.Code,{}),toolbarButtonType:`button`,tooltip:`Code Block`,action:()=>Y("```js\n","\n```")},table:{icon:(0,d.jsx)(f.Table,{}),toolbarButtonType:`button`,tooltip:`Table`,action:()=>Y(`
| Header | Header |
| --- | --- |
| Cell | Cell |
`)},image:{icon:(0,d.jsx)(f.Image,{}),toolbarButtonType:`button`,tooltip:`Image`,action:()=>Q()},link:{icon:(0,d.jsx)(f.Link,{}),toolbarButtonType:`button`,tooltip:`Link`,action:()=>Z()},font:{icon:(0,d.jsx)(f.Font,{}),label:`Font`,toolbarButtonType:`dropdown`,tooltip:`Font`,options:u,action:e=>{ne(e)}},scrollSync:{label:`Scroll Sync`,toolbarButtonType:`switch`,tooltip:F?`Disable Scroll Sync`:`Enable Scroll Sync`,action:()=>re(!F)},preview:{icon:k?(0,d.jsx)(f.Eye,{}):(0,d.jsx)(f.EyeOff,{}),toolbarButtonType:`button`,tooltip:k?`Hide Preview`:`Show Preview`,action:()=>{ee(!k)}}};return W.forEach(t=>{t.showInToolbar&&(t.toolbarButtonType===`button`?e[t.key]={icon:t.icon,label:t.showLabel?t.name:void 0,toolbarButtonType:t.toolbarButtonType||`button`,tooltip:t.tooltip||t.name,action:()=>{t.onToolbarClick&&t.onToolbarClick({openDialog:X,insertText:Y})}}:t.toolbarButtonType===`dropdown`&&t.options?e[t.key]={icon:t.icon,label:t.showLabel?t.name:void 0,toolbarButtonType:t.toolbarButtonType||`button`,tooltip:t.tooltip||t.name,action:e=>{t.onToolbarValueChange&&t.onToolbarValueChange(e,{openDialog:X,insertText:Y})},options:t.options}:t.toolbarButtonType===`switch`&&(e[t.key]={icon:t.icon,label:t.showLabel?t.name:void 0,toolbarButtonType:t.toolbarButtonType||`button`,tooltip:t.tooltip||t.name,action:e=>{t.onToolbarValueChange&&t.onToolbarValueChange(e,{openDialog:X,insertText:Y})}}))}),e},[K,q,F,k,W,Y,Q,Z,ie]);return(0,d.jsxs)(`div`,{className:`editor-container flex flex-col border border-gray-200 dark:border-gray-500 rounded-lg bg-white dark:bg-slate-800 shadow-sm overflow-hidden font-sans ${n}`,children:[(0,d.jsx)(g,{isOpen:B.isOpen,title:B.title,fields:B.fields,onClose:()=>V(e=>({...e,isOpen:!1})),onConfirm:B.onConfirm}),D&&(0,d.jsxs)(`div`,{className:`header-bar flex items-center justify-between gap-3 px-3 py-2 border-b border-gray-200 dark:border-gray-500 bg-gray-50 dark:bg-slate-800 select-none`,children:[(0,d.jsx)(`div`,{className:`left-tools tools flex items-center gap-1 p-1 overflow-x-auto scrollbar-hide`,children:x?(0,d.jsx)(`div`,{className:`read-only-title text-sm text-gray-600`,children:`Read-Only Mode`}):(0,d.jsx)(d.Fragment,{children:w?.slice(0,w?.length-1).map((e,t)=>(0,d.jsxs)(m.Fragment,{children:[t>0&&(0,d.jsx)(`div`,{className:`tool-divide divide w-px h-5 bg-gray-300 mx-2`}),e.map(e=>{let t=$[e];return t?t.toolbarButtonType===`button`?(0,d.jsx)(v,{icon:t.icon,tooltip:t.tooltip,onClick:()=>t.action(),disabled:t.disabled??!1},e):t.toolbarButtonType===`dropdown`&&t.options?(0,d.jsxs)(`div`,{className:`tool-select flex flex-row items-center gap-2`,children:[t.label&&(0,d.jsx)(`span`,{className:`tool-label text-xs text-gray-500 mb-0.5 select-none`,children:t.label}),(0,d.jsx)(`select`,{value:j,disabled:t.disabled??!1,onChange:e=>t.action(e.target.value),className:`text-sm p-1 rounded border border-gray-400 bg-white dark:bg-slate-700 dark:border-gray-600 hover:ring-1 hover:ring-blue-400 focus:border-none focus:shadow-none focus:ring-0 focus:outline-1 focus:outline-blue-400`,title:t.tooltip,children:t.options.map(e=>(0,d.jsx)(`option`,{value:e.value,children:e.label},e.value))},e)]},e):t.toolbarButtonType===`switch`?(0,d.jsx)(b,{title:t.label,defaultChecked:F,disabled:t.disabled??!1,onChange:()=>{t.action()}},e):null:null})]},t))})}),(0,d.jsx)(`div`,{className:`right-tools tools flex items-center gap-3 p-1 pl-4 ${w?.slice(w?.length-1)[0].length>0?`has-children`:``}`,children:w?.slice(w?.length-1).map((e,t)=>(0,d.jsxs)(m.Fragment,{children:[t>0&&(0,d.jsx)(`div`,{className:`tool-divide divide w-px h-5 bg-gray-300 mx-2`}),e.map(e=>{let t=$[e];return t?t.toolbarButtonType===`button`?(0,d.jsx)(v,{icon:t.icon,tooltip:t.tooltip,onClick:()=>t.action(),disabled:t.disabled??!1},e):t.toolbarButtonType===`dropdown`&&t.options?(0,d.jsxs)(`div`,{className:`tool-select flex flex-row items-center gap-2`,children:[t.label&&(0,d.jsx)(`span`,{className:`tool-label text-xs text-gray-500 mb-0.5 select-none`,children:t.label}),(0,d.jsx)(`select`,{value:j,onChange:e=>t.action(e.target.value),className:`text-sm p-1 rounded border border-gray-400 bg-white dark:bg-slate-700 dark:border-gray-600 hover:ring-1 hover:ring-blue-400 focus:border-none focus:shadow-none focus:ring-0 focus:outline-1 focus:outline-blue-400`,title:t.tooltip,disabled:t.disabled??!1,children:t.options.map(e=>(0,d.jsx)(`option`,{value:e.value,children:e.label},e.value))},e)]},e):t.toolbarButtonType===`switch`?(0,d.jsx)(b,{title:t.label,defaultChecked:F,disabled:t.disabled??!1,onChange:()=>{t.action()}},e):null:null})]},t))})]}),(0,d.jsxs)(`div`,{className:`editor-area flex-1 flex overflow-hidden`,children:[(0,d.jsxs)(`div`,{"data-preview":k?`true`:`false`,className:`editor-col relative box-border flex flex-col ${k?`w-1/2`:`w-full`}`,style:{fontFamily:j},children:[(0,d.jsx)(`pre`,{ref:N,"aria-hidden":`true`,dangerouslySetInnerHTML:{__html:ae},className:`relative font-[inherit] bg-white dark:bg-slate-900 dark:text-gray-400 w-full h-full box-border inset-0 m-0 p-4 text-sm antialiased leading-relaxed border-none resize-none outline-none whitespace-pre-wrap overflow-auto`}),(0,d.jsx)(`textarea`,{ref:M,value:e,cols:100,onChange:oe,onScroll:()=>J(`editor`),onKeyDown:se,placeholder:`Type your markdown here...`,spellCheck:!1,readOnly:x,className:`absolute font-[inherit] text-transparent bg-transparent caret-black z-10 w-full h-full box-border inset-0 m-0 p-4 text-sm antialiased leading-relaxed border-none resize-none outline-none whitespace-pre-wrap overflow-auto ${k?`border-r border-gray-200`:``}`})]}),k&&(0,d.jsxs)(`div`,{className:`preview-col w-1/2 h-full flex flex-col box-border bg-gray-50 dark:bg-slate-900 dark:text-gray-400`,children:[y&&(0,d.jsx)(`div`,{className:`preview-header px-3 py-1 bg-gray-100 dark:bg-gray-800 border-b border-b-gray-200 dark:border-b-gray-500 text-xs text-gray-500 dark:text-gray-400 font-semibold uppercase tracking-wider`,children:`Preview`}),(0,d.jsx)(`div`,{ref:P,className:`preview flex-1 h-full box-border overflow-y-auto p-8 text-gray-800 dark:text-gray-200`,style:{fontFamily:j},dangerouslySetInnerHTML:{__html:A}})]})]}),O&&(0,d.jsxs)(`div`,{className:`footer-bar bg-gray-50 border-t border-gray-200 px-4 py-2 flex justify-between items-center select-none text-xs font-mono`,children:[(0,d.jsx)(`div`,{className:`left-bar text-gray-400 font-semibold`,children:`MARKDOWN`}),(0,d.jsxs)(`div`,{className:`right-bar flex items-center gap-4 transition-colors duration-200`,children:[(0,d.jsxs)(`div`,{className:`word-count flex items-center gap-1.5 ${U?`text-red-600`:`text-gray-500`}`,title:`Word Count`,children:[(0,d.jsx)(`svg`,{viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,strokeWidth:`2`,className:`w-3.5 h-3.5 opacity-70`,children:(0,d.jsx)(`path`,{d:`M4 7V4h16v3M9 20h6M12 4v16`})}),(0,d.jsxs)(`span`,{className:U?`font-bold`:``,children:[H.words,` `,T?`/ ${T}`:``,` words`]})]}),(0,d.jsx)(`div`,{className:`divide w-px h-5 bg-gray-300 mx-2`}),(0,d.jsx)(`div`,{className:`char-count flex items-center gap-1.5`,title:`Character Count`,children:(0,d.jsxs)(`span`,{className:U?`font-bold text-red-600`:``,children:[H.chars,` chars`]})})]})]})]})},S=x;x.__docgenInfo={description:`Example Usage:\r
<MarkdownEditor\r
    value={markdownText}\r
    onChange={(newText) => setMarkdownText(newText)}\r
    className="my-4"\r
    plugins={[CustomPlugin1, CustomPlugin2]}\r
/>`,methods:[],displayName:`MarkdownEditor`,props:{className:{defaultValue:{value:`''`,computed:!1},required:!1},plugins:{defaultValue:{value:`[]`,computed:!1},required:!1},scrollSync:{defaultValue:{value:`true`,computed:!1},required:!1},preview:{defaultValue:{value:`true`,computed:!1},required:!1},showPreviewHeader:{defaultValue:{value:`true`,computed:!1},required:!1},readOnly:{defaultValue:{value:`false`,computed:!1},required:!1},customFonts:{defaultValue:{value:`[]`,computed:!1},required:!1},defaultFont:{defaultValue:{value:`'monospace'`,computed:!1},required:!1},toolbar:{defaultValue:{value:`DEFAULT_TOOLBAR`,computed:!0},required:!1},wordLimit:{defaultValue:{value:`500`,computed:!1},required:!1},characterLimit:{defaultValue:{value:`2000`,computed:!1},required:!1},showToolbar:{defaultValue:{value:`true`,computed:!1},required:!1},showFooterBar:{defaultValue:{value:`true`,computed:!1},required:!1}}};var C=({value:e,onChange:t,className:n,plugins:r=[],scrollSync:i=!0,preview:a=!0,readOnly:o=!1,showPreviewHeader:s,showFooterBar:c,showToolbar:l,characterLimit:u,wordLimit:f,customFonts:p,defaultFont:h,toolbar:g})=>{let[_,v]=(0,m.useState)(e);return(0,d.jsx)(S,{value:_,onChange:e=>{v(e),t(e)},plugins:r,scrollSync:i,preview:a,showPreviewHeader:s,readOnly:o,className:n,showToolbar:l,showFooterBar:c,wordLimit:f,characterLimit:u,customFonts:p,defaultFont:h,toolbar:g})},w=C;C.__docgenInfo={description:``,methods:[],displayName:`MarkdownEditorPreview`,props:{value:{required:!0,tsType:{name:`string`},description:``},onChange:{required:!0,tsType:{name:`signature`,type:`function`,raw:`(value: string) => void`,signature:{arguments:[{type:{name:`string`},name:`value`}],return:{name:`void`}}},description:``},className:{required:!1,tsType:{name:`string`},description:``},plugins:{required:!1,tsType:{name:`Array`,elements:[{name:`MarkdownPlugin`}],raw:`MarkdownPlugin[]`},description:``,defaultValue:{value:`[]`,computed:!1}},scrollSync:{required:!1,tsType:{name:`boolean`},description:``,defaultValue:{value:`true`,computed:!1}},preview:{required:!1,tsType:{name:`boolean`},description:``,defaultValue:{value:`true`,computed:!1}},showPreviewHeader:{required:!1,tsType:{name:`literal`,value:`true`},description:``},readOnly:{required:!1,tsType:{name:`boolean`},description:``,defaultValue:{value:`false`,computed:!1}},showToolbar:{required:!1,tsType:{name:`boolean`},description:``},showFooterBar:{required:!1,tsType:{name:`boolean`},description:``},wordLimit:{required:!1,tsType:{name:`number`},description:``},characterLimit:{required:!1,tsType:{name:`number`},description:``},customFonts:{required:!1,tsType:{name:`Array`,elements:[{name:`FontOption`}],raw:`FontOption[]`},description:``},defaultFont:{required:!1,tsType:{name:`string`},description:``},toolbar:{required:!1,tsType:{name:`ToolbarLayout`},description:``}}};var T=t({Demo:()=>O,__namedExportsOrder:()=>k,default:()=>D}),{fn:E}=__STORYBOOK_MODULE_TEST__,D={title:`Example/MarkdownEditor`,component:w,parameters:{layout:`centered`},argTypes:{value:{control:`text`},onChange:{action:`value changed`},className:{control:`text`},scrollSync:{control:`boolean`},preview:{control:`boolean`},plugins:{control:`object`},showPreviewHeader:{control:`boolean`},readOnly:{control:`boolean`},customFonts:{control:`object`},defaultFont:{control:`text`},toolbar:{control:`object`},wordLimit:{control:`number`},characterLimit:{control:`number`},showToolbar:{control:`boolean`},showFooterBar:{control:`boolean`}},args:{value:`## Hello Markdown Editor

This is a **Markdown Editor** component with live preview and scroll sync features.`,onChange:E(),className:`w-full`,scrollSync:!0,preview:!0,plugins:[],showPreviewHeader:!0,readOnly:!1,customFonts:[],defaultFont:`monospace`,toolbar:[[`undo`,`redo`],[`heading`,`bold`,`italic`,`strike`,`font`],[`quote`,`list`,`list-ordered`,`check`],[`table`,`image`,`link`,`code`],[`raw-image`,`youtube-embed`,`test`],[`scrollSync`,`preview`]],wordLimit:1e3,characterLimit:4e3,showToolbar:!0,showFooterBar:!0}};const O={args:{value:`
# Features Demo

## Features

* CommonMark + GFM Specifications
    * Live Preview
    * Scroll Sync
* Auto Indent
* Syntax Highlight
    1. Markdown
    2. Preview

## Quotes

> See the table below for default options
>> More API information can be found in the document

## Table

| name | type | description |
|---|---|---|
| el | \`HTMLElement\` | container element |
| el | \`HTMLElement\` | container element |
| el | \`HTMLElement\` | container element |

## Links
[Google](https://google.com)

<a id="link_id" href="https://google.com" title="Link">Google Raw Link</a>

## Images
![Alt text](https://placehold.co/400)

<img src="https://placehold.co/400" width="200" height="auto" alt="test" title="test" />

## Lists
- Item 1
- Item 2
    - Subitem 1
    - Subitem 2
- Item 3

1. First
2. Second
3. Third

## Task List
- [x] Task 0
- [ ] Task 1
- [ ] Task level 1
    - [ ] Task level 2
## Code blocks
\`\`\`javascript
const test = 123
if (test === 123) {
    console.log('Hello World')
}

if (test > 122) {
    console.log('Greater than 122')
}
\`\`\`
`,onChange:E(),className:`w-full h-150`,scrollSync:!0,preview:!0,plugins:[],showPreviewHeader:!0,readOnly:!1,customFonts:[],defaultFont:`monospace`,toolbar:[[`undo`,`redo`],[`heading`,`bold`,`italic`,`strike`,`font`],[`quote`,`list`,`list-ordered`,`check`],[`table`,`image`,`link`,`code`],[`raw-image`,`youtube-embed`,`test`],[`scrollSync`,`preview`]],wordLimit:1e3,characterLimit:4e3,showToolbar:!0,showFooterBar:!0}};O.parameters={...O.parameters,docs:{...O.parameters?.docs,source:{originalSource:`{
  args: {
    value: content,
    onChange: fn(),
    className: 'w-full h-150',
    scrollSync: true,
    preview: true,
    plugins: [],
    showPreviewHeader: true,
    readOnly: false,
    customFonts: [],
    defaultFont: 'monospace',
    toolbar: [['undo', 'redo'], ['heading', 'bold', 'italic', 'strike', 'font'], ['quote', 'list', 'list-ordered', 'check'], ['table', 'image', 'link', 'code'], ['raw-image', 'youtube-embed', 'test'],
    // Placeholder for custom plugins
    ['scrollSync', 'preview']],
    wordLimit: 1000,
    characterLimit: 4000,
    showToolbar: true,
    showFooterBar: true
  }
}`,...O.parameters?.docs?.source}}};const k=[`Demo`];export{T as i,k as n,D as r,O as t};